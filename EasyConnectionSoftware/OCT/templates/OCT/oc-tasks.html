{% extends 'dashboard/base.html' %}

{% block link %}
{% endblock link %}

{% block content %}
{% comment %} <div class="row">
    <div class="col-md-12">
        <div class="overview-wrap">
            <h2 class="title-1">overview</h2>
        </div>
    </div>
</div> {% endcomment %}
{% comment %} <div class="row m-t-25">
    <div class="col-sm-6 col-lg-3">
        <div class="overview-item overview-item--c1">
            <div class="overview__inner">
                <div class="overview-box clearfix">
                    <div class="icon">
                        <i class="zmdi zmdi-account-o"></i>
                    </div>
                    <div class="text">
                        <h2>10368</h2>
                        <span>members online</span>
                    </div>
                </div>
                <div class="overview-chart">
                    <canvas id="widgetChart1"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-3">
        <div class="overview-item overview-item--c2">
            <div class="overview__inner">
                <div class="overview-box clearfix">
                    <div class="icon">
                        <i class="zmdi zmdi-shopping-cart"></i>
                    </div>
                    <div class="text">
                        <h2>388,688</h2>
                        <span>items solid</span>
                    </div>
                </div>
                <div class="overview-chart">
                    <canvas id="widgetChart2"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-3">
        <div class="overview-item overview-item--c3">
            <div class="overview__inner">
                <div class="overview-box clearfix">
                    <div class="icon">
                        <i class="zmdi zmdi-calendar-note"></i>
                    </div>
                    <div class="text">
                        <h2>1,086</h2>
                        <span>this week</span>
                    </div>
                </div>
                <div class="overview-chart">
                    <canvas id="widgetChart3"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-6 col-lg-3">
        <div class="overview-item overview-item--c4">
            <div class="overview__inner">
                <div class="overview-box clearfix">
                    <div class="icon">
                        <i class="zmdi zmdi-money"></i>
                    </div>
                    <div class="text">
                        <h2>$1,060,386</h2>
                        <span>total earnings</span>
                    </div>
                </div>
                <div class="overview-chart">
                    <canvas id="widgetChart4"></canvas>
                </div>
            </div>
        </div>
    </div>
</div> {% endcomment %}
</br>
<div class="row">
    <div class="col-lg-6">
        <div class="au-card recent-report">
            <div class="au-card-inner">
                <h3 class="title-2">recent reports</h3>
                <div class="chart-info">
                    <div class="chart-info__left">
                        <div class="chart-note">
                            <span class="dot dot--blue"></span>
                            <span>products</span>
                        </div>
                        <div class="chart-note mr-0">
                            <span class="dot dot--green"></span>
                            <span>services</span>
                        </div>
                    </div>
                    <div class="chart-info__right">
                        <div class="chart-statis">
                            <span class="index incre">
                                <i class="zmdi zmdi-long-arrow-up"></i>25%</span>
                            <span class="label">products</span>
                        </div>
                        <div class="chart-statis mr-0">
                            <span class="index decre">
                                <i class="zmdi zmdi-long-arrow-down"></i>10%</span>
                            <span class="label">services</span>
                        </div>
                    </div>
                </div>
                <div class="recent-report__chart">
                    <canvas id="recent-rep-chart"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="au-card chart-percent-card">
            <div class="au-card-inner">
                <h3 class="title-2 tm-b-5">char by %</h3>
                <div class="row no-gutters">
                    <div class="col-xl-6">
                        <div class="chart-note-wrap">
                            <div class="chart-note mr-0 d-block">
                                <span class="dot dot--blue"></span>
                                <span>products</span>
                            </div>
                            <div class="chart-note mr-0 d-block">
                                <span class="dot dot--red"></span>
                                <span>services</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-xl-6">
                        <div class="percent-chart">
                            <canvas id="percent-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="overview-wrap">
            <h2 class="title-1">Opening Tasks</h2>
            {% comment %} <button class="au-btn au-btn-icon au-btn--blue">
                <i class="zmdi zmdi-plus"></i>add item</button> {% endcomment %}
        </div>
    </div>
</div>
<div class="row m-t-25">
    <div class="col-sm-6 col-lg-3 fa-hover">
        <button type="button" data-toggle="modal" data-target="#daily_task">
            <div class="overview-item overview-item--c2 text-left">
                <div class="overview__inner ">
                    <div class="overview-box clearfix">
                        <div class="icon">
                            <i class="fa fa-clock-o"></i>
                        </div>
                        <div class="text">
                            <h2>New Task</h2>
                            <span>Tracked every day</span>
                        </div>
                    </div>
                    <div class="overview-chart">
                        <canvas id="widgetChart2"></canvas>
                    </div>
                </div>
            </div>
        </button>
    </div>
    {% comment %} <div class="col-sm-6 col-lg-3">
        <button type="button" data-toggle="modal" data-target="#monthly_task" >
            <div class="overview-item overview-item--c4 text-left">
                <div class="overview__inner ">
                        <div class="overview-box clearfix">
                            <div class="icon">
                                <i class="fa fa-calendar"></i>
                            </div>
                            <div class="text">
                                <h2>Monthly</h2>
                                <span>Tracked every month</span>
                            </div>
                        </div>
                        <div class="overview-chart">
                            <canvas id="widgetChart4"></canvas>
                        </div>
                </div>
            </div>
        </button>
    </div> {% endcomment %}
</div>

</br></br></br>

<div class="row">
    <div class="col-md-12">
        <div class="overview-wrap">
            <h2 class="title-1">Closing Tasks</h2>
            {% comment %} <button class="au-btn au-btn-icon au-btn--blue">
                <i class="zmdi zmdi-plus"></i>add item</button> {% endcomment %}
        </div>
    </div>
        <div class="col-md-12 px-5">
            <!-- DATA TABLE -->
            </br></br>
            <div class="table-responsive table-responsive-data2">
                <table class="table table-data2">
                    <thead>
                        <tr>
                            <th>topic</th>
                            <th>estimated time</th>
                            <th>status</th>
                            <th>related goal</th>
                            <th>created at</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for task in daily_tasks %}
                        <tr class="tr-shadow">
                            <td>{{ task.topic }}</td>
                            <td>{{ task.estimated_time }}</td>
                            <td>
                                <span class="role 
                                {% if task.status == "jc" %} bg-warning
                                {% elif task.status == "cba" %}  bg-success
                                {% elif task.status == "og" %} bg-success
                                {% elif task.status == "done" %} bg-primary
                                {% elif task.status == "nd" %} bg-danger
                                {% endif %}
                                ">{{ task.get_status_display }}</span>
                            </td>
                            <td>
                                <span class="text-primary">{{ task.goal_related_to }}</span>
                            </td>
                            <td>{{ task.created_at.time }}</td>
                            <td>
                                <div class="table-data-feature">
                                    {% if task.status != 'done' %} 
                                    <button data-toggle="modal" data-target="#daily_task_edit_{{ task.id }}" class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                        <i class="zmdi zmdi-edit"></i>
                                    </button>
                                    <button class="item" data-toggle="modal" data-target="#daily_task_delete_{{ task.id }}" title="Delete Task" data-toggle="tooltip" data-placement="top" title="Delete Task">
                                        <i class="zmdi zmdi-delete"></i>
                                    </button>
                                    <button  data-toggle="modal" data-target="#daily_task_close_{{ task.id }}" class="item" data-placement="top" title="Close Task">
                                        <i class="zmdi zmdi-check" ></i>
                                    </button>
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                        <tr class="spacer"></tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            </br></br>
            <!-- END DATA TABLE -->
        </div>
</div>

</br></br></br>

<div class="row">
    <div class="col-md-12">
        <div class="overview-wrap">
            <h2 class="title-1">Monthly Goals</h2>
            <button class="au-btn au-btn-icon au-btn--blue" type="button" data-toggle="modal" data-target="#monthly_task">
            <i class="zmdi zmdi-plus"></i>add new goal</button>
            {% comment %} <button class="au-btn au-btn-icon au-btn--blue">
                <i class="zmdi zmdi-plus"></i>add item</button> {% endcomment %}
        </div>
    </div>

    
    
    <div class="col-md-12 px-5">
        </br></br>
        <div class="table-responsive table-responsive-data2">
            <table class="table table-data2">
                <thead>
                    <tr>
                        <th>goal</th>
                        <th>progress</th>
                        <th>description</th>
                        <th>created date</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for task in monthly_tasks %}
                        <tr class="tr-shadow">
                            <td>{{ task.goal }}</td>
                            <td class="text-info">
                                {{ task.progress_percentage }}
                            </td>
                            <td >{{ task.description }}</td>

                            <td >{{ task.created_at.date }}</td>

                            <td>
                                <div class="table-data-feature">
                                    <button data-toggle="modal" data-target="#monthly_task_edit_{{ task.id }}" class="item" data-toggle="tooltip" data-placement="top" title="Edit">
                                        <i class="zmdi zmdi-edit"></i>
                                    </button>
                                    <button onclick="window.location.href='{% url "oc-update" %}?id={{ task.id }}&type=monthly';" class="item" data-toggle="tooltip" data-placement="top" title="Delete">
                                        <i class="zmdi zmdi-delete"></i>
                                    </button>
                                </div>
                            </td>
                        </tr>
                        <tr class="spacer"></tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        <!-- END DATA TABLE -->
    </div>
</div>

{% endblock content %}

{% block modal %}
<div class="modal fade" id="monthly_task" tabindex="-1" role="dialog" aria-labelledby="monthly_taskLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="monthly_taskLabel">Add a new Monthly Task</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
                {% csrf_token %} 
                <div class="modal-body px-5">
                <input type="hidden" hidden name='type' value="monthly">
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="text-input" class=" form-control-label">Goal</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <input required type="text" id="goal" name="goal" placeholder="Goal" class="form-control">
                                <small class="form-text text-muted">Enter a goal for your monthly task</small>
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="text-input" class=" form-control-label">Progress Percentages</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <input required type="text" id="progress" name="progress" placeholder="progress" class="form-control">
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="textarea-input" class=" form-control-label">Description</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <textarea name="description" id="description" rows="9" placeholder="description..." class="form-control"></textarea>
                            </div>
                        </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Confirm</button>
                </div>
            
            </form>
        </div>
    </div>
</div>

<div class="modal fade" id="daily_task" tabindex="-1" role="dialog" aria-labelledby="daily_taskLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="daily_taskLabel">New Daily Task</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="" method="post" enctype="multipart/form-data" class="form-horizontal">
                {% csrf_token %} 
                <div class="modal-body px-5">
                        {% comment %} <div class="row form-group">
                            <div class="col col-md-3">
                                <label class=" form-control-label">Static</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <p class="form-control-static">Username</p>
                            </div>
                        </div> {% endcomment %}
                        <input type="hidden" hidden name='type' value="daily">
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="text-input" class=" form-control-label">Topic</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <input required type="text" id="topic" name="topic" placeholder="topic" class="form-control">
                                <small class="form-text text-muted">Enter a topic for your daily goal</small>
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="text-input" class=" form-control-label">Estimated Time</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <input required type="text" id="estimated" name="estimated" placeholder="estimated" class="form-control">
                            </div>
                        </div>
                        <div class="row form-group">
                            <div class="col col-md-3">
                                <label for="select" class=" form-control-label">Goal related to</label>
                            </div>
                            <div class="col-12 col-md-9">
                                <select name="goal" id="select" class="form-control">
                                    <option value="">Please select a goal</option>
                                    {% for task in monthly_tasks %}
                                    <option value="{{ task.goal }}">{{ task.goal }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Confirm</button>
                </div>
            
            </form>
        </div>
    </div>
</div>

{% for task in daily_tasks %}
    <div class="modal fade" id="daily_task_edit_{{ task.id }}" tabindex="-1" role="dialog" aria-labelledby="daily_task_edit_{{ task.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="daily_taskLabel">Edit Daily Task</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="{% url 'oc-update' %}" method="post" enctype="multipart/form-data" class="form-horizontal">
                    {% csrf_token %} 
                    <div class="modal-body px-5">
                            {% comment %} <div class="row form-group">
                                <div class="col col-md-3">
                                    <label class=" form-control-label">Static</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <p class="form-control-static">Username</p>
                                </div>
                            </div> {% endcomment %}
                            <input type="hidden" hidden name='type' value="daily">
                            <input type="hidden" hidden name='pk' value="{{ task.id }}">
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Topic</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <input required value='{{ task.topic }}' type="text" id="topic" name="topic" placeholder="topic" class="form-control">
                                    <small class="form-text text-muted">Enter a topic for your daily goal</small>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Estimated Time</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <input required value='{{ task.estimated_time }}' type="text" id="estimated" name="estimated" placeholder="estimated" class="form-control">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="select" class=" form-control-label">Goal related to</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <select name="goal" id="select" class="form-control">
                                        <option value="">None</option>
                                        {% for taskm in monthly_tasks %}
                                        <option {% if taskm == task.goal_related_to %}selected{% endif %} value="{{ taskm.goal }}">{{ taskm.goal }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Confirm</button>
                    </div>
                
                </form>
            </div>
        </div>
    </div>
{% endfor %}

{% for task in daily_tasks %}
    <div class="modal fade" id="daily_task_close_{{ task.id }}" tabindex="-1" role="dialog" aria-labelledby="daily_task_close_{{ task.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="daily_taskLabel">Close Task</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="{% url 'oc-close' %}" method="post" enctype="multipart/form-data" class="form-horizontal">
                    {% csrf_token %} 
                    <div class="modal-body px-5">
                            {% comment %} <div class="row form-group">
                                <div class="col col-md-3">
                                    <label class=" form-control-label">Static</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <p class="form-control-static">Username</p>
                                </div>
                            </div> {% endcomment %}
                            <input type="hidden" hidden name='type' value="daily">
                            <input type="hidden" hidden name='pk' value="{{ task.id }}">
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Actual Time</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <input required type="text" id="topic" name="actual_time" placeholder="" class="form-control">
                                    <small class="form-text text-muted">How long it actually took you to finish the task</small>
                                </div>
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Confirm</button>
                    </div>
                
                </form>
            </div>
        </div>
    </div>
{% endfor %}

{% for task in daily_tasks %}
    <div class="modal fade" id="daily_task_delete_{{ task.id }}" tabindex="-1" role="dialog" aria-labelledby="daily_task_delete_{{ task.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="daily_taskLabel">Delete Task</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="{% url 'oc-update' %}" method="get" enctype="multipart/form-data" class="form-horizontal">
                    {% csrf_token %} 
                    <div class="modal-body px-5">
                            <input type="hidden" hidden name='type' value="daily">
                            <input type="hidden" hidden name='pk' value="{{ task.id }}">
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Are you sure you want to delete this task?</label>
                                </div>
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button value="Delete" type="submit" class="btn btn-primary">Confirm</button>
                    </div>
                
                </form>
            </div>
        </div>
    </div>
{% endfor %}



{% for task in monthly_tasks %}
    <div class="modal fade" id="monthly_task_edit_{{ task.id }}" tabindex="-1" role="dialog" aria-labelledby="monthly_task_edit_{{ task.id }}" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="monthly_taskLabel">Add a new Monthly Task</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <form action="{% url "oc-update" %}" method="post" enctype="multipart/form-data" class="form-horizontal">
                    {% csrf_token %} 
                    <div class="modal-body px-5">
                    <input type="hidden" hidden name='type' value="monthly">
                    <input type="hidden" hidden name='pk' value="{{ task.id }}">
                        <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Goal</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <input required type="text" value="{{ task.goal }}" id="goal" name="goal" placeholder="Goal" class="form-control">
                                    <small class="form-text text-muted">Enter a goal for your monthly task</small>
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="text-input" class=" form-control-label">Progress Percentages</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <input required value="{{ task.progress_percentage }}" type="text" id="progress" name="progress" placeholder="progress" class="form-control">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col col-md-3">
                                    <label for="textarea-input" class=" form-control-label">Description</label>
                                </div>
                                <div class="col-12 col-md-9">
                                    <textarea name="description" id="description" rows="9" placeholder="description..." class="form-control">{{ task.description }}</textarea>
                                </div>
                            </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Confirm</button>
                    </div>
                
                </form>
            </div>
        </div>
    </div>
{% endfor %}

{% endblock modal%}

{% block script %}
<script>
</script>
{% endblock script %}